<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SawitCatat - Beranda</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'sawit-green': '#2E7D32',
                        'sawit-yellow': '#FFD600',
                    }
                },
                fontFamily: {
                    'sans': ['Poppins', 'Inter', 'system-ui', 'sans-serif'],
                }
            }
        }
    </script>
</head>
<body class="bg-white font-sans">
    <!-- Header -->
    <header class="bg-white shadow-sm p-4 flex items-center justify-center md:justify-start md:px-8 lg:px-16">
        <div class="flex items-center">
            <img src="images/logo.png" alt="SawitCatat Logo" class="h-10 mr-2">
            <h1 class="text-sawit-green text-xl font-bold">SawitCatat</h1>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-6 max-w-md md:max-w-4xl lg:max-w-6xl xl:max-w-7xl">
        <div class="md:grid md:grid-cols-3 md:gap-6">
            <!-- Left Column: Total Panen & Button (for desktop) -->
            <div class="md:col-span-1">
                <!-- Total Panen Hari Ini -->
                <div class="bg-white rounded-lg shadow-md p-6 mb-6 border-l-4 border-sawit-green">
                    <h2 class="text-gray-600 text-sm mb-1">Total Panen Hari Ini</h2>
                    <p class="text-4xl font-bold text-sawit-green"><span id="totalHariIni">0</span> <span class="text-xl">Tandan</span></p>
                </div>

                <!-- Tombol Catat Panen -->
                <a href="catat.html" class="block bg-sawit-green hover:bg-green-800 text-white rounded-lg shadow-md p-4 mb-6 text-center font-medium text-lg transition duration-200">
                    <span class="flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
                        </svg>
                        Catat Panen Sekarang
                    </span>
                </a>
            </div>

            <!-- Right Column: Statistics (for desktop) -->
            <div class="md:col-span-2">
                <!-- Statistik Mingguan -->
                <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6 h-full">
                    <h2 class="text-gray-600 text-sm mb-3 flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                        </svg>
                        Statistik Mingguan
                    </h2>
                    
                    <!-- Desktop version - expanded stats -->
                    <div class="hidden md:block">
                        <div class="grid grid-cols-3 gap-4 mb-4">
                            <div class="bg-gray-50 p-4 rounded-lg text-center">
                                <p class="text-3xl font-bold text-sawit-green" id="totalMingguDesktop">0</p>
                                <p class="text-sm text-gray-500">Total Tandan</p>
                            </div>
                            <div class="bg-gray-50 p-4 rounded-lg text-center">
                                <p class="text-3xl font-bold text-sawit-yellow" id="totalLokasiDesktop">0</p>
                                <p class="text-sm text-gray-500">Lokasi Blok</p>
                            </div>
                            <div class="bg-gray-50 p-4 rounded-lg text-center">
                                <p class="text-3xl font-bold text-sawit-green" id="hariKerjaDesktop">0</p>
                                <p class="text-sm text-gray-500">Hari Kerja</p>
                            </div>
                        </div>
                        
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <h3 class="font-medium text-gray-700 mb-2">Distribusi Panen per Blok</h3>
                            <div class="grid grid-cols-4 gap-2">
                                <div class="bg-white p-2 rounded border border-gray-200">
                                    <p class="text-xl font-bold text-sawit-green" id="blokATotalDesktop">0</p>
                                    <p class="text-xs text-gray-500">Blok A</p>
                                </div>
                                <div class="bg-white p-2 rounded border border-gray-200">
                                    <p class="text-xl font-bold text-sawit-green" id="blokBTotalDesktop">0</p>
                                    <p class="text-xs text-gray-500">Blok B</p>
                                </div>
                                <div class="bg-white p-2 rounded border border-gray-200">
                                    <p class="text-xl font-bold text-sawit-green" id="blokCTotalDesktop">0</p>
                                    <p class="text-xs text-gray-500">Blok C</p>
                                </div>
                                <div class="bg-white p-2 rounded border border-gray-200">
                                    <p class="text-xl font-bold text-sawit-green" id="blokDTotalDesktop">0</p>
                                    <p class="text-xs text-gray-500">Blok D</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Mobile version - simple stats -->
                    <div class="flex justify-between items-center text-center md:hidden">
                        <div class="flex-1">
                            <p class="text-2xl font-bold text-sawit-green" id="totalMingguMobile">0</p>
                            <p class="text-xs text-gray-500">Tandan</p>
                        </div>
                        <div class="flex-1">
                            <p class="text-2xl font-bold text-sawit-yellow" id="totalLokasiMobile">0</p>
                            <p class="text-xs text-gray-500">Lokasi</p>
                        </div>
                        <div class="flex-1">
                            <p class="text-2xl font-bold text-sawit-green" id="hariKerjaMobile">0</p>
                            <p class="text-xs text-gray-500">Hari Kerja</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Navigation Bar -->
    <nav class="fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-200 md:px-8 lg:px-16">
        <div class="flex justify-around max-w-screen-lg mx-auto">
            <a href="index.html" class="flex-1 py-3 flex flex-col items-center justify-center text-sawit-green">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                </svg>
                <span class="text-xs">Beranda</span>
            </a>
            <a href="catat.html" class="flex-1 py-3 flex flex-col items-center justify-center text-gray-500 hover:text-sawit-green">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                </svg>
                <span class="text-xs">Catat</span>
            </a>
            <a href="riwayat.html" class="flex-1 py-3 flex flex-col items-center justify-center text-gray-500 hover:text-sawit-green">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                <span class="text-xs">Riwayat</span>
            </a>
            <a href="panduan.html" class="flex-1 py-3 flex flex-col items-center justify-center text-gray-500 hover:text-sawit-green">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                <span class="text-xs">Info</span>
            </a>
        </div>
    </nav>

    <script>
        // Data model for the app
        const sawitCatatApp = {
            // Initialize the app
            init: function() {
                // Load data from localStorage or initialize if not exists
                this.loadData();
                // Update the UI
                this.updateUI();
            },

            // Load data from localStorage
            loadData: function() {
                const storedData = localStorage.getItem('sawitCatatData');
                if (storedData) {
                    this.data = JSON.parse(storedData);
                } else {
                    // Initialize with empty data
                    this.data = {
                        entries: []
                    };
                    this.saveData();
                }
            },

            // Save data to localStorage
            saveData: function() {
                localStorage.setItem('sawitCatatData', JSON.stringify(this.data));
            },

            // Get today's entries
            getTodayEntries: function() {
                const today = new Date().toLocaleDateString('id-ID');
                return this.data.entries.filter(entry => 
                    new Date(entry.timestamp).toLocaleDateString('id-ID') === today
                );
            },

            // Get entries from the last 7 days
            getWeeklyEntries: function() {
                const now = new Date();
                const oneWeekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);
                
                return this.data.entries.filter(entry => 
                    new Date(entry.timestamp) >= oneWeekAgo
                );
            },

            // Get total of tandans
            getTotalTandans: function(entries) {
                return entries.reduce((total, entry) => total + entry.jumlahTandan, 0);
            },

            // Get unique locations
            getUniqueLocations: function(entries) {
                const locations = entries.map(entry => entry.lokasi);
                return [...new Set(locations)].length;
            },

            // Get unique working days
            getWorkingDays: function(entries) {
                const days = entries.map(entry => 
                    new Date(entry.timestamp).toLocaleDateString('id-ID')
                );
                return [...new Set(days)].length;
            },

            // Get total tandans by location
            getTotalByLocation: function(entries, location) {
                return entries
                    .filter(entry => entry.lokasi === location)
                    .reduce((total, entry) => total + entry.jumlahTandan, 0);
            },

            // Update the UI with current data
            updateUI: function() {
                const todayEntries = this.getTodayEntries();
                const weeklyEntries = this.getWeeklyEntries();
                
                // Update today's total
                document.getElementById('totalHariIni').textContent = this.getTotalTandans(todayEntries);
                
                // Update weekly stats - Mobile
                document.getElementById('totalMingguMobile').textContent = this.getTotalTandans(weeklyEntries);
                document.getElementById('totalLokasiMobile').textContent = this.getUniqueLocations(weeklyEntries);
                document.getElementById('hariKerjaMobile').textContent = this.getWorkingDays(weeklyEntries);
                
                // Update weekly stats - Desktop
                document.getElementById('totalMingguDesktop').textContent = this.getTotalTandans(weeklyEntries);
                document.getElementById('totalLokasiDesktop').textContent = this.getUniqueLocations(weeklyEntries);
                document.getElementById('hariKerjaDesktop').textContent = this.getWorkingDays(weeklyEntries);
                
                // Update distribution by block
                document.getElementById('blokATotalDesktop').textContent = this.getTotalByLocation(weeklyEntries, 'blok-a');
                document.getElementById('blokBTotalDesktop').textContent = this.getTotalByLocation(weeklyEntries, 'blok-b');
                document.getElementById('blokCTotalDesktop').textContent = this.getTotalByLocation(weeklyEntries, 'blok-c');
                document.getElementById('blokDTotalDesktop').textContent = this.getTotalByLocation(weeklyEntries, 'blok-d');
            }
        };

        // Initialize the app when the DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            sawitCatatApp.init();
        });
    </script>
</body>
</html>
